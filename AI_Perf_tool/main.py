
import os
from typing import Dict
import seaborn as sns
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
sns.set(color_codes=True)
import common.thresh as thresh


recall_10 = [0.902, 0.902, 0.902, 0.878, 0.853, 0.818, 0.785, 0.727, 0.586, 0.01]
precision_10 = [0.998, 0.998, 0.998, 0.998, 0.998, 0.999, 1.0, 1.0, 1.0, 1.0]

recall_10 = [0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.949, 0.946, 0.942, 0.94, 0.939, 0.937, 0.937, 0.933, 0.931, 0.931, 0.93, 0.928, 0.927, 0.922, 0.918, 0.916, 0.915, 0.915, 0.913, 0.912, 0.91, 0.904, 0.9, 0.895, 0.892, 0.892, 0.889, 0.879, 0.879, 0.873, 0.867, 0.867, 0.862, 0.855, 0.847, 0.843, 0.838, 0.832, 0.826, 0.82, 0.814, 0.808, 0.796, 0.79, 0.79, 0.781, 0.769, 0.763, 0.756, 0.742, 0.726, 0.711, 0.694, 0.684, 0.666, 0.651, 0.628, 0.61, 0.597, 0.571, 0.543, 0.508, 0.472, 0.43, 0.393, 0.355, 0.318, 0.259, 0.189, 0.111, 0.0]
precision_10 = [0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.992, 0.994, 0.994, 0.994, 0.995, 0.995, 0.995, 0.997, 0.997, 0.997, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 0.998, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0]


#[0.01, 0.586, 0.727, 0.785, 0.818, 0.853, 0.878, 0.902, 0.902, 0.902]
def get_ap(rec, prec):
    sorted_recall = sorted(rec)
    dealt_recall = [0]*len(sorted_recall)
    dealt_recall[0] = sorted_recall[0]
    for i in range(len(sorted_recall)):
        if i >=1:
            dealt_recall[i] = round(sorted_recall[i] - sorted_recall[i-1], 3)
    #[0, 0.576, 0.141, 0.058, 0.033, 0.035, 0.025, 0.024, 0.0, 0.0]
    print(dealt_recall)
    ap = 0
    for i in range(len(sorted_recall)):
        ap += dealt_recall[i]*prec[i]

    return ap


 

#(0.902, [0.0, 0.01, 0.586, 0.727, 0.785, 0.818, 0.853, 0.878, 0.902, 0.902, 0.902, 1.0], [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0])
print(get_ap(recall_10, precision_10))
